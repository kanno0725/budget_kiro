# 要件書

## 概要

家計簿アプリは、個人や家庭の収入と支出を記録・管理し、財務状況を把握できるWebアプリケーションです。ユーザーが日々の取引を簡単に入力でき、カテゴリ別の分析や月次レポートを通じて支出パターンを理解し、予算管理を効率的に行えることを目的とします。また、複数のユーザーが共同で出費を管理・共有し、家族やルームメイトとの費用分担を透明化できる機能も提供します。

## 要件

### 要件1

**ユーザーストーリー:** ユーザーとして、収入と支出の取引を記録したいので、家計の状況を正確に把握できるようになりたい

#### 受入基準

1. WHEN ユーザーが取引入力フォームにアクセスする THEN システムは 金額、カテゴリ、日付、メモの入力フィールドを表示する SHALL
2. WHEN ユーザーが有効な取引データを入力して保存ボタンを押す THEN システムは 取引をデータベースに保存し、成功メッセージを表示する SHALL
3. WHEN ユーザーが必須フィールド（金額、カテゴリ、日付）を空白のまま保存しようとする THEN システムは エラーメッセージを表示し、保存を拒否する SHALL
4. WHEN ユーザーが負の金額を入力する THEN システムは 支出として記録する SHALL
5. WHEN ユーザーが正の金額を入力する THEN システムは 収入として記録する SHALL

### 要件2

**ユーザーストーリー:** ユーザーとして、過去の取引履歴を確認したいので、支出パターンや収支の推移を分析できるようになりたい

#### 受入基準

1. WHEN ユーザーが取引履歴ページにアクセスする THEN システムは 最新の取引から順に一覧表示する SHALL
2. WHEN ユーザーが日付範囲を指定してフィルタリングする THEN システムは 指定期間内の取引のみを表示する SHALL
3. WHEN ユーザーがカテゴリでフィルタリングする THEN システムは 選択されたカテゴリの取引のみを表示する SHALL
4. WHEN ユーザーが取引項目をクリックする THEN システムは 取引の詳細情報を表示する SHALL
5. WHEN ユーザーが取引を編集または削除する THEN システムは 変更を保存し、履歴を更新する SHALL

### 要件3

**ユーザーストーリー:** ユーザーとして、カテゴリ別の支出を可視化したいので、どの分野にお金を使っているかを理解できるようになりたい

#### 受入基準

1. WHEN ユーザーがダッシュボードにアクセスする THEN システムは 当月の収入・支出の合計を表示する SHALL
2. WHEN ユーザーがカテゴリ別支出グラフを表示する THEN システムは 円グラフまたは棒グラフで各カテゴリの割合を表示する SHALL
3. WHEN ユーザーが月次推移グラフを表示する THEN システムは 過去12ヶ月の収支推移を線グラフで表示する SHALL
4. WHEN ユーザーが特定の期間を選択する THEN システムは 選択期間のデータでグラフを更新する SHALL

### 要件4

**ユーザーストーリー:** ユーザーとして、予算を設定して管理したいので、支出をコントロールし、貯蓄目標を達成できるようになりたい

#### 受入基準

1. WHEN ユーザーがカテゴリ別予算を設定する THEN システムは 月次予算額を保存する SHALL
2. WHEN ユーザーの支出が予算の80%に達する THEN システムは 警告通知を表示する SHALL
3. WHEN ユーザーの支出が予算を超過する THEN システムは 超過アラートを表示する SHALL
4. WHEN ユーザーが予算vs実績レポートを表示する THEN システムは 各カテゴリの予算と実際の支出を比較表示する SHALL

### 要件5

**ユーザーストーリー:** ユーザーとして、家族やルームメイトと共同で出費を管理したいので、費用分担を透明化し、誰がいくら支払ったかを正確に把握できるようになりたい

#### 受入基準

1. WHEN ユーザーがグループを作成する THEN システムは グループ名とメンバー招待リンクを生成する SHALL
2. WHEN ユーザーが招待リンクでグループに参加する THEN システムは ユーザーをグループメンバーに追加する SHALL
3. WHEN ユーザーが共同出費を記録する THEN システムは 支払者と分担メンバーを指定できる SHALL
4. WHEN ユーザーが費用分担を設定する THEN システムは 等分割または個別金額指定を選択できる SHALL
5. WHEN ユーザーが精算状況を確認する THEN システムは 各メンバー間の貸借関係を表示する SHALL
6. WHEN ユーザーが割り勘清算を実行する THEN システムは 全メンバーの残高を均等に清算する SHALL

### 要件6

**ユーザーストーリー:** ユーザーとして、データを安全に管理したいので、情報の紛失や不正アクセスを防げるようになりたい

#### 受入基準

1. WHEN ユーザーがアカウントを作成する THEN システムは パスワードを暗号化して保存する SHALL
2. WHEN ユーザーがログインする THEN システムは 認証情報を検証し、セッションを開始する SHALL
3. WHEN ユーザーが30分間非アクティブである THEN システムは 自動的にログアウトする SHALL
4. WHEN ユーザーがデータをエクスポートする THEN システムは CSV形式でダウンロード可能にする SHALL
5. IF ユーザーが他のユーザーのデータにアクセスしようとする THEN システムは アクセスを拒否する SHALL
6. IF ユーザーがグループメンバーでない THEN システムは グループデータへのアクセスを拒否する SHALL